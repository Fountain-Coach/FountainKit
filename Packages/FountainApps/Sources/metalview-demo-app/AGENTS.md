# metalview-demo-app — plan and operator notes

This demo shows MetalViewKit running as a MIDI 2.0 “instrument” with an operator‑friendly three‑pane UI: an Instrument Map (JSON editor), a live MIDI log, and an Inspector for CI Discovery/PE Get‑Set with transport/audio controls. Visuals render square (triangle and textured quad), uniforms include `zoom`, `tint.r/g/b`, `rotationSpeed` (quad), and basic color pipeline controls. Mapping covers NoteOn/CC/PB with shaping (curve, smoothing, quantize, deadband, offset, scale, invert). Transports include Loopback and CoreMIDI (network/BLE via system), and UMP 1.0 fallback is allowed. CI Discovery + PE over SysEx7 UMP is wired to the Inspector (with chunking), and the middle pane summarizes channel voice and CI traffic.

Current CI identity uses 0x7D as Manufacturer ID, placeholder Family/Model, and a software rev of `0x00000001`. MUID derives from each view’s `instanceId` (stable per run). Replace IDs once an official Manufacturer ID is assigned. Keep the UI square with `.aspectRatio(1, .fit)` and apply aspect in shaders; isolate UMP helpers in `MetalInstrument.swift`. Keep uniform smoothing and `setUniform` main‑thread safe and avoid control chrome in the header — panes own controls.

Design source of truth: SVGs live under `Design/metalview-demo/` (`wireframe-three-pane.svg`, `wireframe-dual-view.svg`) and the user story in `Design/MetalViewKit-DEMO-USER-STORY.md`. Run the app with `swift run --package-path Packages/FountainApps metalview-demo-app`. For Wi‑Fi/BLE, enable a CoreMIDI Network session or pair BLE MIDI in Audio MIDI Setup, then select the destination in the right pane when using the CoreMIDI transport.
